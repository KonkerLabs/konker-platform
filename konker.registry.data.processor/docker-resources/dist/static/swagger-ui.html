<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Swagger UI</title>
  <link rel="icon" type="image/png" href="webjars/springfox-swagger-ui/images/favicon-32x32.png" sizes="32x32"/>
  <link rel="icon" type="image/png" href="webjars/springfox-swagger-ui/images/favicon-16x16.png" sizes="16x16"/>
  <link href='webjars/springfox-swagger-ui/css/typography.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='webjars/springfox-swagger-ui/css/reset.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='webjars/springfox-swagger-ui/css/screen.css' media='screen' rel='stylesheet' type='text/css'/>
  <link href='webjars/springfox-swagger-ui/css/reset.css' media='print' rel='stylesheet' type='text/css'/>
  <link href='webjars/springfox-swagger-ui/css/print.css' media='print' rel='stylesheet' type='text/css'/>

  <script src='webjars/springfox-swagger-ui/lib/object-assign-pollyfill.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/jquery-1.8.0.min.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/jquery.slideto.min.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/jquery.wiggle.min.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/handlebars-4.0.5.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/lodash.min.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/backbone-min.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/swagger-ui.min.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/highlight.9.1.0.pack.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/highlight.9.1.0.pack_extended.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/jsoneditor.min.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/marked.js' type='text/javascript'></script>
  <script src='webjars/springfox-swagger-ui/lib/swagger-oauth.js' type='text/javascript'></script>

  <script src='webjars/springfox-swagger-ui/springfox.js' type='text/javascript'></script>
  <style type="text/css">
  .swagger-section .swagger-ui-wrap .info_md ol li,
  .swagger-section .swagger-ui-wrap .info_md ul li {
    padding: 3px 0px;
    line-height: 1.4em;
    color: #333333;
  }

  .swagger-section .swagger-ui-wrap .info_md ol,
  .swagger-section .swagger-ui-wrap .info_md ul {
    font-family: "Droid Sans", sans-serif;
    margin: 5px 0 10px;
    padding: 0 0 0 18px;
    list-style-type: disc;
  }

  .swagger-section .swagger-ui-wrap .info_md h3 {
    color: #547f00;
  }
  .swagger-section .swagger-ui-wrap .info_md h4 {
    color: #666666;
  }
  </style>
</head>

<body class="swagger-section">
<div id='header'>
  <div class="swagger-ui-wrap">
    <a id="logo" href="http://swagger.io"><img class="logo__img" alt="swagger" height="30" width="30" src="webjars/springfox-swagger-ui/images/logo_small.png" /><span class="logo__title">swagger</span></a>
    <form id='api_selector'>
      <div class='input'>
        <select id="select_baseUrl" name="select_baseUrl"/>
      </div>
      <div class='input'><input placeholder="http://example.com/api" id="input_baseUrl" name="baseUrl" type="text"/></div>
      <div id='auth_container'></div>
      <div class='input'><a id="explore" class="header__btn" href="#" data-sw-translate>Explore</a></div>
    </form>
  </div>
</div>

<div id="message-bar" class="swagger-ui-wrap message-success" data-sw-translate=""></div>

<div class="swagger-ui-wrap">
    <div class="info">
	    <div class="info_description info_md">

		    <div class="info_title">Konker Platform API</div>

		    <hr>

			<h2 id="authentication">Authentication</h2>

			<h3 id="overview">Overview</h3>
			<p>Konker Platform API uses the OAuth protocol to allow users securely access data.</p>
			<p>Before making REST API calls, you must get an access token using <a href="http://oauth.net/">OAuth 2.0</a>.</p>
			<p>You can see the API endpoints documentation and interact with them on this page.</p>

			<h3 id="get-oauth-2-access-token">Get OAuth 2 Access Token</h3>
			<ul>
				<li>Grant Type: Implicit Grant (or User Agent) Flow</li>
				<li>Access Token URL: <a href="http://localhost:8080/v1/swagger-ui.html" id="token_url_link"><span id="token_url_text">http://localhost:8080/v1/oauth/token</span></a></li>
				<li>Client ID: your e-mail</li>
				<li>Client Secret: your password</li>
			</ul>

			<h3 id="swagger-authorization">Swagger Authorization</h3>
			<p>To use Swagger endpoints:</p>
			<ul>
				<li>Login using your email and password: <a href="/v1/oauth/token?grant_type=client_credentials" target="_blank">here</a></li>
				<li>Click the 'Authorize' button in upper right conner</li>
			</ul>

			<hr>

			<h2 id="concepts">Concepts</h2>

			<h3 id="basic-entities">Basic Entities</h3>
			<ul>
				<li><a href='#' onclick="showResource('devices')">Devices</a>: physical devices</li>
				<li><a href='#' onclick="showResource('routes')">Routes</a>: delivers an incoming message to another device or to a REST destination</li>
				<li><a href='#' onclick="showResource('rest_destinations')">REST destination</a>: HTTP based RESTful URLs</li>
				<li><a href='#' onclick="showResource('rest_transformations ')">REST transformation</a>: REST operations that can edit (enrich, convert, etc) the device messages</li>
			</ul>

			<h3 id="organization-amp-application">Organization &amp; Application</h3>
			<p>A user belongs to an organization.</p>
			<p>An organization can have multiples applications.</p>
			<p>An application is a repository of basic entities.</p>
			<p>For instance, you can organize your devices in applications if you have many IoT projects.</p>
			<p>
				<img src="static/diagram.png" alt="Concepts">
			</p>

            <p>Related endpoints:</p>
            <ul>
                <li><a href='#' onclick="showResource('applications')">Applications</a></li>
                <li><a href='#' onclick="showResource('users')">Users</a></li>
            </ul>

			<h3 id="devices">Devices</h3>
			<p>Each device has a key and a password. The 'device credentials' operations manage these credentials.</p>
			<p>The Platform will receive the device's messages. The 'events' operations list these messages.</p>
            <p>Custom data lets you store any additional information of a device that you need (like device's manufacturer details).</p>

            <p>Related endpoints:</p>
            <ul>
                <li><a href='#' onclick="showResource('device_credentials')">Device credentials</a></li>
                <li><a href='#' onclick="showResource('events')">Events</a></li>
                <li><a href='#' onclick="showResource('devices_custom_data')">Custom data</a></li>
            </ul>

			<h3 id="devices-configuration">Devices Configuration</h3>
			<p>A device can probe the platform to receive its configuration information.</p>
			<p>A configuration is based on the application, the device model and location set to the device.</p>
			<p>The locations are organized in a hierarchical (tree) structure. Each application has one root location. Each location can have multiples sublocations.</p>
			<p>Related endpoints:</p>
			<ul>
				<li><a href='#' onclick="showResource('device_models')">Device Model</a></li>
				<li><a href='#' onclick="showResource('locations')">Location</a></li>
				<li><a href='#' onclick="showResource('device_configs')">Device Configuration</a></li>
			</ul>

            <h3 id="device-health">Device Health</h3>

            <p>It is possible to create alerts to verify the device status.</p>

            <p>Types of alerts:</p>
            <ul>
                <li><b>Silence</b>: Check if the device stopped to send messages after a number of minutes.</li>
            </ul>

            <p>Related endpoints:</p>
            <ul>
                <li><a href='#' onclick="showResource('alert_triggers')">Alert Triggers</a></li>
            </ul>

			<h3 id="more-informations">More Informations</h3>
			<ul>
				<li><a href="http://developers.konkerlabs.com">Developer Portal</a></li>
				<li><a href="https://konker.atlassian.net/wiki/display/DEV/Guia+de+Uso+da+Plataforma+Konker">Operation Guide (in Portuguese)</a></li>
			</ul>
			<hr>

	    </div>

		<div class="info_email"><a target="_parent" href="mailto:support@konkerlabs.com?subject=" data-sw-translate="">Contact the developer</a></div>
		<div class="info_license"><a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a></div>

	</div>
</div>

<script>
	function showResource(name) {
		$('.endpoints:visible').parent().find('.toggleEndpointList').click(); // hide endpoints with expanded (listed) operations
		window.Docs.expandEndpointListForResource(name);

		$('html, body').animate({
	        scrollTop: $('#resource_' + name).offset().top
	    }, 500);
	}

	$(document).ready(function(){
		var url = window.location.href
		var arr = url.split("/");
		var newurl = arr[0] + "//" + arr[2] + "/v1/oauth/token"

		$('#token_url_link').attr('href', newurl);
		$('#token_url_text').text(newurl);
	})
</script>

<div id="message-bar" class="swagger-ui-wrap" data-sw-translate>&nbsp;</div>
<div id="swagger-ui-container" class="swagger-ui-wrap"></div>
</body>
</html>
